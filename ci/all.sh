#!/bin/bash -xev
# Copyright (c) 2017-2018, Substratum LLC (https://substratum.net) and/or its affiliates. All rights reserved.
CI_DIR="$( cd "$( dirname "$0" )" && pwd )"
NODE_PARENT_DIR="$1"

cd "$CI_DIR/../test_utils"
echo "*********************************************************************************************************"
echo "*********************************************************************************************************"
echo "***                                            TEST_UTILS HEAD                                        ***"
ci/all.sh
cd "$CI_DIR/../sub_lib"
echo "***                                            TEST_UTILS TAIL                                        ***"
echo "*********************************************************************************************************"
echo "*********************************************************************************************************"
echo "***                                             SUB_LIB HEAD                                          ***"
ci/all.sh
cd "$CI_DIR/../entry_dns_lib"
echo "***                                             SUB_LIB TAIL                                          ***"
echo "*********************************************************************************************************"
echo "*********************************************************************************************************"
echo "***                                            ENTRY_DNS HEAD                                         ***"
ci/all.sh
cd "$CI_DIR/../neighborhood_lib"
echo "***                                            ENTRY_DNS TAIL                                         ***"
echo "*********************************************************************************************************"
echo "*********************************************************************************************************"
echo "***                                           NEIGHBORHOOD HEAD                                       ***"
ci/all.sh
cd "$CI_DIR/../hopper_lib"
echo "***                                           NEIGHBORHOOD TAIL                                       ***"
echo "*********************************************************************************************************"
echo "*********************************************************************************************************"
echo "***                                              HOPPER HEAD                                          ***"
ci/all.sh
cd "$CI_DIR/../proxy_server_lib"
echo "***                                              HOPPER TAIL                                          ***"
echo "*********************************************************************************************************"
echo "*********************************************************************************************************"
echo "***                                           PROXY SERVER HEAD                                       ***"
ci/all.sh
cd "$CI_DIR/../proxy_client_lib"
echo "***                                           PROXY SERVER TAIL                                       ***"
echo "*********************************************************************************************************"
echo "*********************************************************************************************************"
echo "***                                           PROXY CLIENT HEAD                                       ***"
ci/all.sh
cd "$CI_DIR/../node"
echo "***                                           PROXY CLIENT TAIL                                       ***"
echo "*********************************************************************************************************"
echo "*********************************************************************************************************"
echo "***                                               NODE HEAD                                           ***"
ci/all.sh "$NODE_PARENT_DIR"
echo "***                                               NODE TAIL                                           ***"
echo "*********************************************************************************************************"
echo "*********************************************************************************************************"
